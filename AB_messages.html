<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AntBarter</title>
    <link rel="stylesheet" href="AB_home2.css" />
    <script defer src="AB_home_ui2.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <h1>AntBarter</h1>
      <nav>
        <div>
          <a href="AB_home.html">Home</a>
          <a href="AB_about.html">About</a>
          <a href="AB_how-it-works.html">How It Works</a>
          <a href="AB_contact.html">Contact</a>
          <a href="AB_create_bp.html">Create Posting</a>
          <a href="AB_find_bp.html">Find Posting</a>
        </div>
        <div id="userLoggedIn">
          <a href="AB_profile.html" aria-label="Profile">
            <i class="fas fa-user"></i>
          </a>
          <p id="userName">First Last</p>
          <a href="AB_messages.html" aria-label="Messages">
            <i class="fas fa-envelope"></i>
          </a>
          <p>Messages</p>
        </div>
        <button id="sign-out">Sign Out</button>
      </nav>
    </header>

    <div id="message-inbox">
      <h1>Messages</h1>
      <h2>
        Send a Message:
        <!-- View Messages Button -->
        <span id="view-messages-wrapper">
          <button onclick="toggleMessages()" id="view-messages-btn">
            View All Messages
          </button>
        </span>
      </h2>
      <form action="/send_message" method="post" enctype="multipart/form-data">
        <label for="recipient">Recipient:</label><br />
        <input type="text" id="recipient" name="recipient" /><br />
        <label for="message">Message:</label><br />
        <textarea id="message" name="message" class="message-box"></textarea
        ><br />
        <label for="file">Attach file:</label>
        <input type="file" id="file" name="file" /><br />
        <input type="submit" value="Send Message" />
      </form>
      <h3>Recent Message Conversation:</h3>
      <div id="message-list" class="message-list">
        <!-- Messages will appear here -->
      </div>
    </div>

    <script>
      // Here's a glimpse of your recent conversations
      const messages = [
        { sender: "Wasfi", content: "Hey there!" },
        { sender: "Othman", content: "Hi Wasfi, how are you?" },
        { sender: "Wasfi", content: "I'm good, thanks! How about you?" },
        // More messages...
      ];

      // Load your recent messages into the chat
      function populateMessageList() {
        const messageList = document.getElementById("message-list");

        // Clear existing content
        messageList.innerHTML = "";

        // Loop through messages and create message elements
        messages.forEach((message) => {
          const messageElement = document.createElement("div");
          messageElement.classList.add("message");

          // Check if the message sender is the current user or not
          if (message.sender === "Wasfi") {
            messageElement.classList.add("sender-message");
          } else if (message.sender === "Othman") {
            messageElement.classList.add("receiver-message");
          }

          messageElement.innerHTML = `
      <div class="message-sender">${message.sender}</div>
      <div class="message-content">${message.content}</div>
    `;
          messageList.appendChild(messageElement);
        });
      }
      // Toggle the display of all messages
      function toggleMessages() {
        const messageList = document.getElementById("message-list");
        messageList.classList.toggle("show-all-messages");
      }
      // Loading your recent messages into the chat
      populateMessageList();
    </script>
  </body>
</html>
